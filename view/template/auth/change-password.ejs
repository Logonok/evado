<%
const messages = _controller.getFlash('passwordChanged');
const changePassword = _t('Change password');
%>
<% layout(_view.get('_layout/auth')); %>
<% block('title', changePassword); %>

<% if (messages.length) { %>
<div class="alert alert-success"><%- messages[0] %></div>
<div class="text-center">
    <a href="/"><%- _t('Back to main') %></a>
</div>
<% } else { %>
<p class="login-box-msg">
    <%- changePassword %>
</p>
<form action="auth/change-password" method="post" class="form">
    <%- include('./input', {
        attr: 'currentPassword',
        type: 'password',
        iconClass: 'glyphicon glyphicon-lock',
        value: ''
    }) %>
    <%- include('./input', {
        attr: 'newPassword',
        type: 'password',
        iconClass: 'glyphicon glyphicon-lock',
        value: '',
        autocomplete: 'new-password'
    }) %>
    <%- include('./input', {
        attr: 'newPasswordRepeat',
        type: 'password',
        iconClass: 'glyphicon glyphicon-lock',
        value: '',
        autocomplete: 'new-password'
    }) %>
    <%- include('./captcha', {
        attr: 'captchaCode',
        iconClass: 'glyphicon glyphicon-check',
        url: 'auth/captcha'
    }) %>
    <div class="form-attr form-group mt20">
        <button type="submit" class="btn btn-primary btn-block btn-flat">
            <%- _t('Save') %>
        </button>
    </div>
</form>
<% } %>